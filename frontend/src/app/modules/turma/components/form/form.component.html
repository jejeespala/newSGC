<form [formGroup]="formTurma">
    <p-card>
        <div class="grid mb-6 pl-2 pr-2 align-items-center">
            <h2>Formulário de Turma Formação</h2>
            <span class="col"></span>
            <div>
                <button pButton type="button" icon="ui-icon-chevron-left" iconPos="left" label="Voltar"
                        ></button>
            </div>
        </div>

        <div class="grid">
            <div class="col-12 sm:col-2 md:col-2">
                <span class="ui-float-label">
                    <input type="text" pInputText autocomplete="off" formControlName="nome" >
                    <label for="float-input" f>Nome da turma</label>
                </span>
            </div>

            <div class="col-12 sm:col-10 md:col-10">
                <span class="ui-float-label">
                    <input id="float-input" type="text" formControlName="descricao" pInputText autocomplete="off" >
                    <label for="float-input" >Descrição</label>
                </span>
            </div>

            <div class="col-12 sm:col-2 md:col-2 mt-5">
                <span class="ui-float-label">
                    <p-calendar  dateFormat="dd/mm/yy" formControlName="data_inicio" ></p-calendar>
                    <label for="float-input">Data Inicio</label>
                </span>
            </div>

            <div class="col-12 sm:col-2 md:col-2 mt-5">
                <span class="ui-float-label">
                    <p-calendar dateFormat="dd/mm/yy" formControlName="data_termino"></p-calendar>
                    <label for="float-input">Data Termino</label>
                </span>


            <div class="col-12 sm:col-2 md:col-2 mt-5">
                <span class="ui-float-label">
                    <p-dropdown [options]="status" formControlName="id_status">
                    </p-dropdown>
                    <label for="float-input">Status</label>
                </span>
            </div>
        </div>
        <div class="grid mt-3 pl-2 pr-2">
            <button type="submit" pButton label="Salvar" (click)="salvar()"></button>
        </div>
        </div>
    </p-card>
</form>
<form [formGroup]="formColComp">
    <div class="grid pl-2 pr-2" >
        <p-card class="mt-3" >
            <div class="grid mb-3 pl-3 pr-2 align-items-center">
                <h2>Adicionar Competencias e Colaboradores</h2>
            </div>
            <div class="grid mb-6 pl-2 pr-2 align-items-center">
                <div  class="col-12 sm:col-2 md:col-2 mt-3" >
                    <span class="ui-float-label">
                        <p-dropdown #ddCompetencia [filter]="true" filterBy="label,value.name" placeholder="." formControlName="id_competencia" [options]="competencias" [showClear]="true"  (onChange)="listarColaborador($event.value)">
                        </p-dropdown>
                        <label for="float-input">Competencia</label>
                    </span>
                </div>
                <span class="pr-3"></span>
                <div class="col-12 sm:col-2 md:col-2 mt-3">
                    <span class="ui-float-label">
                        <p-dropdown #ddColaborador formControlName="id_colaborador" [options]="colaboradores" placeholder="." [showClear]="true"></p-dropdown>
                        <label for="float-input">Colaborador</label>
                    </span>
                </div>
                <span class="pr-3"></span>
                <div class="col-12 sm:col-2 md:col-2 mt-5">
                    <button (click)="adicionarColaboradorCompetencia(ddCompetencia, ddColaborador)" type="button" icon="ui-icon-plus" pButton></button>
                </div>

                <p-table [value]="colaboradorCompetencias" [responsive]="true" class="mt-5">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Competencia</th>
                            <th>Colaborador</th>
                            <th>Ações</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-cc let-rowIndex="rowIndex">
                        <tr >
                            <td class="text-center">{{cc.id_competencia}}</td>
                            <td class="text-center">{{cc.id_colaborador}}</td>
                            <td class="text-center">
                                <button type="button" icon="ui-icon-trash" pButton class="ui-button-danger"
                                        (click)="removerColaboradorCompetencia(cc)"></button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </p-card>
    </div>
    {{ formTurma.value | json }}
    {{ formColComp.value | json }}
</form>
